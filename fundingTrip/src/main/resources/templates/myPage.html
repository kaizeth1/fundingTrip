<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="js/jquery-3.7.1.min.js"></script>
    <style>
    </style>
    <script th:inline="javascript">
        $(function () {
            let m = [[${msg}]];
            if(m != null){
                alert(m);
            }
        })
    </script>
</head>
<body class="bg-gray-50">
<header><th:block th:insert="~{fragments::header(${session.member})}"/> </header>
<div  class="container mx-auto p-4">
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl font-bold">마이페이지</h1>
        <button class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 focus:outline-none">Logout</button>
    </div>
    <form th:object="${session.member}" th:action="@{/updateProc}" method="post" class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2">
                이름
            </label>
            <input th:value="*{mname}" id="name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                   type="text" name="mname" >
        </div>
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2">
                아이디
            </label>
            <input th:value="*{mid}" id="id" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                   type="text" name="mid" readonly="readonly"> <!-- 아이디는 읽기 전용으로 설정 -->
        </div>
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2">
                비밀번호
            </label>
            <input th:value="*{mpw}" id="pw" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline"
                   type="password" name="mpw" >
        </div>
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2">
                연락처
            </label>
            <input th:value="*{mph}" id="ph" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                   type="text" name="mph" >
        </div>
        <div class="mb-6">
            <label class="block text-gray-700 text-sm font-bold mb-2">
                E-Mail
            </label>
            <input th:value="*{memail}" id="email" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                   type="text" name="memail" >
        </div>
        <!-- 수정 버튼을 폼 안으로 이동 -->
        <button type="submit" name="action" value="update" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
            수정
        </button>
    </form>
    <form th:action="@{/}" method="post" class="flex items-center justify-between">
        <button type="button" onclick="window.location.href='/fundingHistory'" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
            나의 펀딩 내역
        </button>
    </form>
    <form th:action="@{/dropInfo}" method="post" class="flex items-center justify-between">
        <button type="submit" name="action" value="delete" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
            회원 탈퇴
        </button>
    </form>
</div>
<script>
</script>
</body>
</html>